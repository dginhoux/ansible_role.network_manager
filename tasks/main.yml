---
- name: load role asserts
  ansible.builtin.include_tasks:
    file: tasks/asserts.yml

- name: load role variables
  ansible.builtin.include_vars:
    file: "{{ included_vars }}"
  with_first_found:
    - files:
        - "{{ ansible_distribution }}-{{ ansible_distribution_version }}.yml"
        - "{{ ansible_distribution }}.yml"
        - "{{ ansible_os_family }}.yml"
        - "{{ ansible_system }}.yml"
        - "defaults.yml"
      paths:
        - "vars"
      skip: true
  loop_control:
    loop_var: included_vars

- name: load role tasks
  ansible.builtin.include_tasks:
    file: "{{ included_tasks }}"
  with_first_found:
    - files:
        - "{{ ansible_distribution }}-{{ ansible_distribution_version }}.yml"
        - "{{ ansible_distribution }}.yml"
        - "{{ ansible_os_family }}.yml"
        - "{{ ansible_system }}.yml"
        - "defaults.yml"
      paths:
        - "tasks/distribution"
      skip: true
  loop_control:
    loop_var: included_tasks
